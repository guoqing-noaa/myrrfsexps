#!/usr/bin/env bash
# Aloha! This file is to setup some top level experiment options
#
export NET=rrfs                    # rrfs, rtma, 
export MESH_NAME=global-15-3km     # conus12km, conus3km, na12km, etc
export WGF="det"   # working group function = "det", "enkf", "ens", "firewx"
export EXP_NAME=g15-3km
export VERSION=$(cat ./VERSION)
export TAG=g15-3km
export OPSROOT=/gpfs/f6/arfs-gsl/world-shared/gge/rrfs2/regressionTests/${EXP_NAME}
export EXPDIR=${OPSROOT}/exp/rrfs${WGF}
export COMROOT=${OPSROOT}/com      # task input and output data as well as logs
export DATAROOT=${OPSROOT}/stmp    # task workdirs ($DATA) which to be removed immediately upon task completion unless KEEPDATA=YES
#
export ZETA_LEVELS="L126.txt"
export PHYSICS_SUITE="mpas_global"
#export DO_CLEAN=true
#
for i in {0..23};    do arr[$i]="03"; done # 3hr fcst
for i in {0..23..12}; do arr[$i]="12"; done # 12hr fcst every 12hrs
export FCST_LEN_HRS_CYCLES="${arr[*]}"
export HISTORY_INTERVAL=1
export MPASOUT_INTERVAL=none
export MPASSIT_GROUP_TOTAL_NUM=2
export UPP_GROUP_TOTAL_NUM=2
#
export IC_OFFSET=6
#
export RETRO_PERIOD="2024050600-2024050700"
export COLDSTART_CYCS="00 12"   # cycles to cold start from external models
export KEEPDATA=NO
#
export IC_EXTRN_MDL_NAME="GFS"
export IC_EXTRN_MDL_FILENAME_PATTERN="gfs.@Y@m@d/@H/gfs.t@Hz.pgrb2.0p25.f^HHH^"
export IC_EXTRN_MDL_FILENAME_PATTERN_B="gfs.@Y@m@d/@H/gfs.t@Hz.pgrb2b.0p25.f^HHH^"
export IC_EXTRN_MDL_BASEDIR="/gpfs/f6/bil-fire10-oar/world-shared/RRFS2_RETRO_DATA/May2024/GFS"
#
export ACCOUNT="arfs-gsl"
export QUEUE="normal"
export PARTITION="batch"
export CLUSTER="c6"
export NODES_IC="<nodes>10:ppn=160</nodes>"
export NODES_FCST="<nodes>25:ppn=192</nodes>"
export NODES_MPASSIT="<nodes>1:ppn=160</nodes>"
export NODES_UPP="<nodes>1:ppn=80</nodes>"
export WALLTIME_FCST="2:00:00"
export WALLTIME_MPASSIT="2:00:00"
export WALLTIME_UPP="2:00:00"
